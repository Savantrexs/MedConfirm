{"dependencies":[{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":26},"end":{"line":2,"column":52,"index":78}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"requestNotificationPermissions\", {\n    enumerable: true,\n    get: function () {\n      return requestNotificationPermissions;\n    }\n  });\n  Object.defineProperty(exports, \"scheduleMedicationNotifications\", {\n    enumerable: true,\n    get: function () {\n      return scheduleMedicationNotifications;\n    }\n  });\n  Object.defineProperty(exports, \"cancelMedicationNotifications\", {\n    enumerable: true,\n    get: function () {\n      return cancelMedicationNotifications;\n    }\n  });\n  Object.defineProperty(exports, \"cancelAllNotifications\", {\n    enumerable: true,\n    get: function () {\n      return cancelAllNotifications;\n    }\n  });\n  Object.defineProperty(exports, \"rescheduleAllNotifications\", {\n    enumerable: true,\n    get: function () {\n      return rescheduleAllNotifications;\n    }\n  });\n  var _expoNotifications = require(_dependencyMap[0], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  // Notification utilities\n\n  // Configure notification handler\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: false\n    })\n  });\n  const requestNotificationPermissions = async () => {\n    try {\n      const {\n        status: existingStatus\n      } = await Notifications.getPermissionsAsync();\n      let finalStatus = existingStatus;\n      if (existingStatus !== 'granted') {\n        const {\n          status\n        } = await Notifications.requestPermissionsAsync();\n        finalStatus = status;\n      }\n      return finalStatus === 'granted';\n    } catch (error) {\n      console.error('Error requesting notification permissions:', error);\n      return false;\n    }\n  };\n  const scheduleMedicationNotifications = async medication => {\n    try {\n      // Cancel existing notifications for this medication\n      await cancelMedicationNotifications(medication.id);\n      if (!medication.isActive) {\n        return;\n      }\n      const daysOfWeek = medication.daysOfWeek || [0, 1, 2, 3, 4, 5, 6];\n      for (const time of medication.timesPerDay) {\n        const [hours, minutes] = time.split(':').map(Number);\n        for (const dayOfWeek of daysOfWeek) {\n          await Notifications.scheduleNotificationAsync({\n            content: {\n              title: `Reminder: Take ${medication.name}`,\n              body: medication.dosageText ? `${medication.dosageText} â€¢ Tap to confirm` : 'Tap to confirm',\n              data: {\n                medicationId: medication.id\n              }\n            },\n            trigger: {\n              hour: hours,\n              minute: minutes,\n              weekday: dayOfWeek === 0 ? 1 : dayOfWeek + 1,\n              // Expo uses 1-7 for Sun-Sat\n              repeats: true\n            }\n          });\n        }\n      }\n    } catch (error) {\n      console.error('Error scheduling notifications:', error);\n    }\n  };\n  const cancelMedicationNotifications = async medicationId => {\n    try {\n      const scheduled = await Notifications.getAllScheduledNotificationsAsync();\n      const toCancel = scheduled.filter(notification => notification.content.data?.medicationId === medicationId);\n      for (const notification of toCancel) {\n        await Notifications.cancelScheduledNotificationAsync(notification.identifier);\n      }\n    } catch (error) {\n      console.error('Error canceling notifications:', error);\n    }\n  };\n  const cancelAllNotifications = async () => {\n    try {\n      await Notifications.cancelAllScheduledNotificationsAsync();\n    } catch (error) {\n      console.error('Error canceling all notifications:', error);\n    }\n  };\n  const rescheduleAllNotifications = async medications => {\n    try {\n      await cancelAllNotifications();\n      for (const medication of medications) {\n        if (medication.isActive) {\n          await scheduleMedicationNotifications(medication);\n        }\n      }\n    } catch (error) {\n      console.error('Error rescheduling notifications:', error);\n    }\n  };\n});","lineCount":145,"map":[[22,2,15,0,"Object"],[22,8,15,0],[22,9,15,0,"defineProperty"],[22,23,15,0],[22,24,15,0,"exports"],[22,31,15,0],[23,4,15,0,"enumerable"],[23,14,15,0],[24,4,15,0,"get"],[24,7,15,0],[24,18,15,0,"get"],[24,19,15,0],[25,6,15,0],[25,13,15,0,"requestNotificationPermissions"],[25,43,15,0],[26,4,15,0],[27,2,15,0],[28,2,32,0,"Object"],[28,8,32,0],[28,9,32,0,"defineProperty"],[28,23,32,0],[28,24,32,0,"exports"],[28,31,32,0],[29,4,32,0,"enumerable"],[29,14,32,0],[30,4,32,0,"get"],[30,7,32,0],[30,18,32,0,"get"],[30,19,32,0],[31,6,32,0],[31,13,32,0,"scheduleMedicationNotifications"],[31,44,32,0],[32,4,32,0],[33,2,32,0],[34,2,69,0,"Object"],[34,8,69,0],[34,9,69,0,"defineProperty"],[34,23,69,0],[34,24,69,0,"exports"],[34,31,69,0],[35,4,69,0,"enumerable"],[35,14,69,0],[36,4,69,0,"get"],[36,7,69,0],[36,18,69,0,"get"],[36,19,69,0],[37,6,69,0],[37,13,69,0,"cancelMedicationNotifications"],[37,42,69,0],[38,4,69,0],[39,2,69,0],[40,2,84,0,"Object"],[40,8,84,0],[40,9,84,0,"defineProperty"],[40,23,84,0],[40,24,84,0,"exports"],[40,31,84,0],[41,4,84,0,"enumerable"],[41,14,84,0],[42,4,84,0,"get"],[42,7,84,0],[42,18,84,0,"get"],[42,19,84,0],[43,6,84,0],[43,13,84,0,"cancelAllNotifications"],[43,35,84,0],[44,4,84,0],[45,2,84,0],[46,2,92,0,"Object"],[46,8,92,0],[46,9,92,0,"defineProperty"],[46,23,92,0],[46,24,92,0,"exports"],[46,31,92,0],[47,4,92,0,"enumerable"],[47,14,92,0],[48,4,92,0,"get"],[48,7,92,0],[48,18,92,0,"get"],[48,19,92,0],[49,6,92,0],[49,13,92,0,"rescheduleAllNotifications"],[49,39,92,0],[50,4,92,0],[51,2,92,0],[52,2,2,0],[52,6,2,0,"_expoNotifications"],[52,24,2,0],[52,27,2,0,"require"],[52,34,2,0],[52,35,2,0,"_dependencyMap"],[52,49,2,0],[53,2,2,0],[53,6,2,0,"Notifications"],[53,19,2,0],[53,22,2,0,"_interopNamespace"],[53,39,2,0],[53,40,2,0,"_expoNotifications"],[53,58,2,0],[54,2,1,0],[56,2,6,0],[57,2,7,0,"Notifications"],[57,15,7,13],[57,16,7,14,"setNotificationHandler"],[57,38,7,36],[57,39,7,37],[58,4,8,2,"handleNotification"],[58,22,8,20],[58,24,8,22],[58,30,8,22,"handleNotification"],[58,31,8,22],[58,37,8,35],[59,6,9,4,"shouldShowAlert"],[59,21,9,19],[59,23,9,21],[59,27,9,25],[60,6,10,4,"shouldPlaySound"],[60,21,10,19],[60,23,10,21],[60,27,10,25],[61,6,11,4,"shouldSetBadge"],[61,20,11,18],[61,22,11,20],[62,4,12,2],[62,5,12,3],[63,2,13,0],[63,3,13,1],[63,4,13,2],[64,2,15,7],[64,8,15,13,"requestNotificationPermissions"],[64,38,15,43],[64,41,15,46],[64,47,15,46,"requestNotificationPermissions"],[64,48,15,46],[64,53,15,76],[65,4,16,2],[65,8,16,6],[66,6,17,4],[66,12,17,10],[67,8,17,12,"status"],[67,14,17,18],[67,16,17,20,"existingStatus"],[68,6,17,35],[68,7,17,36],[68,10,17,39],[68,16,17,45,"Notifications"],[68,29,17,58],[68,30,17,59,"getPermissionsAsync"],[68,49,17,78],[68,50,17,79],[68,51,17,80],[69,6,18,4],[69,10,18,8,"finalStatus"],[69,21,18,19],[69,24,18,22,"existingStatus"],[69,38,18,36],[70,6,20,4],[70,10,20,8,"existingStatus"],[70,24,20,22],[70,29,20,27],[70,38,20,36],[70,40,20,38],[71,8,21,6],[71,14,21,12],[72,10,21,14,"status"],[73,8,21,21],[73,9,21,22],[73,12,21,25],[73,18,21,31,"Notifications"],[73,31,21,44],[73,32,21,45,"requestPermissionsAsync"],[73,55,21,68],[73,56,21,69],[73,57,21,70],[74,8,22,6,"finalStatus"],[74,19,22,17],[74,22,22,20,"status"],[74,28,22,26],[75,6,23,4],[76,6,25,4],[76,13,25,11,"finalStatus"],[76,24,25,22],[76,29,25,27],[76,38,25,36],[77,4,26,2],[77,5,26,3],[77,6,26,4],[77,13,26,11,"error"],[77,18,26,16],[77,20,26,18],[78,6,27,4,"console"],[78,13,27,11],[78,14,27,12,"error"],[78,19,27,17],[78,20,27,18],[78,64,27,62],[78,66,27,64,"error"],[78,71,27,69],[78,72,27,70],[79,6,28,4],[79,13,28,11],[79,18,28,16],[80,4,29,2],[81,2,30,0],[81,3,30,1],[82,2,32,7],[82,8,32,13,"scheduleMedicationNotifications"],[82,39,32,44],[82,42,32,47],[82,48,32,54,"medication"],[82,58,32,76],[82,62,32,96],[83,4,33,2],[83,8,33,6],[84,6,34,4],[85,6,35,4],[85,12,35,10,"cancelMedicationNotifications"],[85,41,35,39],[85,42,35,40,"medication"],[85,52,35,50],[85,53,35,51,"id"],[85,55,35,53],[85,56,35,54],[86,6,37,4],[86,10,37,8],[86,11,37,9,"medication"],[86,21,37,19],[86,22,37,20,"isActive"],[86,30,37,28],[86,32,37,30],[87,8,38,6],[88,6,39,4],[89,6,41,4],[89,12,41,10,"daysOfWeek"],[89,22,41,20],[89,25,41,23,"medication"],[89,35,41,33],[89,36,41,34,"daysOfWeek"],[89,46,41,44],[89,50,41,48],[89,51,41,49],[89,52,41,50],[89,54,41,52],[89,55,41,53],[89,57,41,55],[89,58,41,56],[89,60,41,58],[89,61,41,59],[89,63,41,61],[89,64,41,62],[89,66,41,64],[89,67,41,65],[89,69,41,67],[89,70,41,68],[89,71,41,69],[90,6,43,4],[90,11,43,9],[90,17,43,15,"time"],[90,21,43,19],[90,25,43,23,"medication"],[90,35,43,33],[90,36,43,34,"timesPerDay"],[90,47,43,45],[90,49,43,47],[91,8,44,6],[91,14,44,12],[91,15,44,13,"hours"],[91,20,44,18],[91,22,44,20,"minutes"],[91,29,44,27],[91,30,44,28],[91,33,44,31,"time"],[91,37,44,35],[91,38,44,36,"split"],[91,43,44,41],[91,44,44,42],[91,47,44,45],[91,48,44,46],[91,49,44,47,"map"],[91,52,44,50],[91,53,44,51,"Number"],[91,59,44,57],[91,60,44,58],[92,8,46,6],[92,13,46,11],[92,19,46,17,"dayOfWeek"],[92,28,46,26],[92,32,46,30,"daysOfWeek"],[92,42,46,40],[92,44,46,42],[93,10,47,8],[93,16,47,14,"Notifications"],[93,29,47,27],[93,30,47,28,"scheduleNotificationAsync"],[93,55,47,53],[93,56,47,54],[94,12,48,10,"content"],[94,19,48,17],[94,21,48,19],[95,14,49,12,"title"],[95,19,49,17],[95,21,49,19],[95,39,49,37,"medication"],[95,49,49,47],[95,50,49,48,"name"],[95,54,49,52],[95,56,49,54],[96,14,50,12,"body"],[96,18,50,16],[96,20,50,18,"medication"],[96,30,50,28],[96,31,50,29,"dosageText"],[96,41,50,39],[96,44,51,16],[96,47,51,19,"medication"],[96,57,51,29],[96,58,51,30,"dosageText"],[96,68,51,40],[96,87,51,59],[96,90,52,16],[96,106,52,32],[97,14,53,12,"data"],[97,18,53,16],[97,20,53,18],[98,16,53,20,"medicationId"],[98,28,53,32],[98,30,53,34,"medication"],[98,40,53,44],[98,41,53,45,"id"],[99,14,53,48],[100,12,54,10],[100,13,54,11],[101,12,55,10,"trigger"],[101,19,55,17],[101,21,55,19],[102,14,56,12,"hour"],[102,18,56,16],[102,20,56,18,"hours"],[102,25,56,23],[103,14,57,12,"minute"],[103,20,57,18],[103,22,57,20,"minutes"],[103,29,57,27],[104,14,58,12,"weekday"],[104,21,58,19],[104,23,58,21,"dayOfWeek"],[104,32,58,30],[104,37,58,35],[104,38,58,36],[104,41,58,39],[104,42,58,40],[104,45,58,43,"dayOfWeek"],[104,54,58,52],[104,57,58,55],[104,58,58,56],[105,14,58,58],[106,14,59,12,"repeats"],[106,21,59,19],[106,23,59,21],[107,12,60,10],[108,10,61,8],[108,11,61,9],[108,12,61,10],[109,8,62,6],[110,6,63,4],[111,4,64,2],[111,5,64,3],[111,6,64,4],[111,13,64,11,"error"],[111,18,64,16],[111,20,64,18],[112,6,65,4,"console"],[112,13,65,11],[112,14,65,12,"error"],[112,19,65,17],[112,20,65,18],[112,53,65,51],[112,55,65,53,"error"],[112,60,65,58],[112,61,65,59],[113,4,66,2],[114,2,67,0],[114,3,67,1],[115,2,69,7],[115,8,69,13,"cancelMedicationNotifications"],[115,37,69,42],[115,40,69,45],[115,46,69,52,"medicationId"],[115,58,69,72],[115,62,69,92],[116,4,70,2],[116,8,70,6],[117,6,71,4],[117,12,71,10,"scheduled"],[117,21,71,19],[117,24,71,22],[117,30,71,28,"Notifications"],[117,43,71,41],[117,44,71,42,"getAllScheduledNotificationsAsync"],[117,77,71,75],[117,78,71,76],[117,79,71,77],[118,6,72,4],[118,12,72,10,"toCancel"],[118,20,72,18],[118,23,72,21,"scheduled"],[118,32,72,30],[118,33,72,31,"filter"],[118,39,72,37],[118,40,73,7,"notification"],[118,52,73,19],[118,56,73,24,"notification"],[118,68,73,36],[118,69,73,37,"content"],[118,76,73,44],[118,77,73,45,"data"],[118,81,73,49],[118,83,73,51,"medicationId"],[118,95,73,63],[118,100,73,68,"medicationId"],[118,112,74,4],[118,113,74,5],[119,6,76,4],[119,11,76,9],[119,17,76,15,"notification"],[119,29,76,27],[119,33,76,31,"toCancel"],[119,41,76,39],[119,43,76,41],[120,8,77,6],[120,14,77,12,"Notifications"],[120,27,77,25],[120,28,77,26,"cancelScheduledNotificationAsync"],[120,60,77,58],[120,61,77,59,"notification"],[120,73,77,71],[120,74,77,72,"identifier"],[120,84,77,82],[120,85,77,83],[121,6,78,4],[122,4,79,2],[122,5,79,3],[122,6,79,4],[122,13,79,11,"error"],[122,18,79,16],[122,20,79,18],[123,6,80,4,"console"],[123,13,80,11],[123,14,80,12,"error"],[123,19,80,17],[123,20,80,18],[123,52,80,50],[123,54,80,52,"error"],[123,59,80,57],[123,60,80,58],[124,4,81,2],[125,2,82,0],[125,3,82,1],[126,2,84,7],[126,8,84,13,"cancelAllNotifications"],[126,30,84,35],[126,33,84,38],[126,39,84,38,"cancelAllNotifications"],[126,40,84,38],[126,45,84,65],[127,4,85,2],[127,8,85,6],[128,6,86,4],[128,12,86,10,"Notifications"],[128,25,86,23],[128,26,86,24,"cancelAllScheduledNotificationsAsync"],[128,62,86,60],[128,63,86,61],[128,64,86,62],[129,4,87,2],[129,5,87,3],[129,6,87,4],[129,13,87,11,"error"],[129,18,87,16],[129,20,87,18],[130,6,88,4,"console"],[130,13,88,11],[130,14,88,12,"error"],[130,19,88,17],[130,20,88,18],[130,56,88,54],[130,58,88,56,"error"],[130,63,88,61],[130,64,88,62],[131,4,89,2],[132,2,90,0],[132,3,90,1],[133,2,92,7],[133,8,92,13,"rescheduleAllNotifications"],[133,34,92,39],[133,37,92,42],[133,43,92,49,"medications"],[133,54,92,74],[133,58,92,94],[134,4,93,2],[134,8,93,6],[135,6,94,4],[135,12,94,10,"cancelAllNotifications"],[135,34,94,32],[135,35,94,33],[135,36,94,34],[136,6,95,4],[136,11,95,9],[136,17,95,15,"medication"],[136,27,95,25],[136,31,95,29,"medications"],[136,42,95,40],[136,44,95,42],[137,8,96,6],[137,12,96,10,"medication"],[137,22,96,20],[137,23,96,21,"isActive"],[137,31,96,29],[137,33,96,31],[138,10,97,8],[138,16,97,14,"scheduleMedicationNotifications"],[138,47,97,45],[138,48,97,46,"medication"],[138,58,97,56],[138,59,97,57],[139,8,98,6],[140,6,99,4],[141,4,100,2],[141,5,100,3],[141,6,100,4],[141,13,100,11,"error"],[141,18,100,16],[141,20,100,18],[142,6,101,4,"console"],[142,13,101,11],[142,14,101,12,"error"],[142,19,101,17],[142,20,101,18],[142,55,101,53],[142,57,101,55,"error"],[142,62,101,60],[142,63,101,61],[143,4,102,2],[144,2,103,0],[144,3,103,1],[145,0,103,2],[145,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","requestNotificationPermissions","scheduleMedicationNotifications","cancelMedicationNotifications","scheduled.filter$argument_0","cancelAllNotifications","rescheduleAllNotifications"],"mappings":"AAA;sBCO;IDI;8CEG;CFe;+CGE;CHmC;6CIE;MCI,0ED;CJS;sCME;CNM;0COE;CPW"},"hasCjsExports":false},"type":"js/module"}]}